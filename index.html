<head>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3plus/1.9.2/d3plus.full.min.js"></script>
  </head>

<div id="app">
  <span class="negrita">Nombre:</span> Ramon Rossello
  <br />
  <span class="negrita">URL:</span> 
    <a href="https://js-vcyoqy.stackblitz.io" target="_blank">
      https://js-vcyoqy.stackblitz.io
    </a>
  <br />
  <span class="negrita">GitHub:</span> 
  <a href="https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos" target="_blank">
    https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos
  </a>
  <h1> Accidentes de tráfico y su tiempo de afectación</h1>
  <h2> Introducción</h2>
  <h3> Contexto y objetivo</h3>
Es una obviedad que en el día a día tenemos que hacer uso de diferentes medios de
transporte para desplazarnos en nuestra localidad, hecho que conlleva
implícitamente la presencia de una gran cantidad de tráfico en las distintas carreteras,
provocando multitud de accidentes que derivan en múltiples atascos generados
diariamente. Concretamente, Estados Unidos es una de las zonas más afectadas al disponer de la mayor cantidad de vehículos en el mundo en circulación, tal y como indica la agencia de marketing digital Hedges & Company, colaboradora de Google. 

<h3> Elementos de la visualización</h3>
En la asignatura cursada de Minería de Datos, se estableció inicialmente el propósito de, a partir del uso de los datos adecuados, facilitar una herramienta y un conjunto de técnicas que permita a los responsables de Tráfico de los Estados Unidos informar correctamente del tiempo en el que el tráfico de una determinada zona se verá afectado u obstaculizado a causa de un accidente. De esta forma, en sincronancia con lo indicado anteriormente, el objetivo principal de esta práctica es entender y visualizar de forma gráfica qué factores afectan y caracterizan al tiempo medio de afectación de una zona de los Estados Unidos derivado por los accidentes de tráfico. La audiencia a la que va dirigida el estudio se trata principalmente de los responsables de la Administración y Dirección de Tráfico de los Estados Unidos. Fijémonos que el control del tiempo en el que que el tráfico se ve afectado a causa de un accidente es uno de sus máximos intereses, puesto que, de esta forma, se podría informar debidamente a la ciudadanía y elaborar los correspondientes planes de mitigación para minimizar el posible impacto. Por tanto, a partir de este documento, la audiencia espera establecer los factores y dependencias que puedan afectar significativamente al tiempo de afectación en el tráfico provocado por un determinado accidente.  En particular, las cuestiones que se pretenden resolver, a través del mensaje facilitado en la siguiente sección con las distintas visualizaciones, son las siguientes:
<ol>
  <li><span class="negrita"> ¿En qué condados el tráfico se ve más tiempo obstaculizado a causa de los distintos accidentes? </li> </span>
  <li><span class="negrita">¿El tiempo de afectación medio en el tráfico provocado por los accidentes es constante en todo el año o hay épocas en las que crece significativamente? </span></li>
  <li><span class="negrita"> ¿El tiempo de afectación del tráfico provocado por un accidente depende de algún otro factor distinto al espacio y el tiempo? </span></li>
</ol>


<h3> Conjunto de datos consultados</h3>
El científico Sobhan Moosavi, procedente de San Francisco, facilita un dataset que recoge la información de los accidentes de tráfico en 49 estados de los Estados Unidos desde febrero de 2016, tal y como se puede observar en la referencia (Moosavi). En particular, el archivo se puede consultar y descargar directamente de la referencia (“Kaggle, data-set US Accidents”). Se trata de un único CSV con nombre US_Accidents_Dec21_updated.csv, el cual contiene 2845342 registros de accidentes y 47 columnas. Sin embargo, tal y como se justificó en la práctica  de Minería de Datos, decidimos limitar el problema inicial a considerar únicamente los accidentes de tráfico producidos durante los años 2020 y 2021 en exclusivamente tres de los estados del país: DC (Washington D. C.), WV (Virginia Occidental) e IA (Iowa), además de realizar la correspondiente etapa de Preprocesado, Limpieza y Transformación de los datos. En adición, en referencia a esta actividad, solamente se tendrán únicamente  accidentes registrados en 2021, puesto que la mayoría de accidentes registrados se producieron en dicho año, tal y como se visualiza en el siguiente diagrama de sectores. 
<iframe width="600" height="450" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRkG0Wl2kiXfrSdZmH7ka8YZwqav5Tn8gi-H-WOpy9IblF6ho_kruKnMp80yb_lJES0dYkCcyOBSmrz/pubchart?oid=158291821&amp;format=interactive"></iframe>
<br>
<br>
Además, teniendo en cuenta los accidentes de 2021, hay que estudiar la variable que representaremos

Por otra parte, las características a considerar en esta actividad son las siguientes: 
<ol>
  <li></li>
  <li></li>
  <li></li>
</ol>

Fijémonos que hay que prestar especial atención en la variable "Time_Affect", puesto que se trata la que tomará el papel principal en la mayoría de visualizaciones. Con el siguiente Boxplot, podemos observar que existen una gran cantidad de outliers extremos. 
tr>
<td style="width: 550px; height: 450px;">
 <img src= https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos/blob/RamonRossello-text/Tiempo_outliers.png?raw=true> </td>
</tr>
 <br>
Siguiendo la definición de anomalías del Test de Tukey, hemos considerado como outliers extremos los valores de tiempo superiores a 3 veces el rango intercuartil, decidiendo prescindir de ellos con la finalidad de visualizar de forma más eficiente todos los diferemntes gráficos. 
tr>
<td style="width: 550px; height: 450px;">
<img src= https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos/blob/RamonRossello-text/Tiempo_def.png?raw=true> </td>
</tr>
<br>
Observemos que se tratan de valores superiores a las 6 horas, lo que corresponde a accidentes con características muy particulares que los Responsables de Tráfico ya tienen controlados y claramente contemplan que son de gran afectación, por lo que no son de vital interés en el estudio. Es decir, de existir un accidente con estas características tan particulares, los Responsables de Tráfico sabrían estimar con bastante exactitud su tiempo de afectación, por lo que quedarían fuera de los objetivos planteados. De esta forma, se consideran solo aquellos accidentes de 2021 que se pueden etiquetar como comunes, siendo justamente los que despiertan el interés de la audiencia y, por tanto, de los que más necesario es entender y visualizar  qué factores afectan y caracterizan a su tiempo medio de afectación  
<br>
<br>
Cabe mencionar que en la asignatura de Estadística Avanzada también se hizo uso de el mismo dataset, aunque el objetivo planteado fue totalmente distinto: intentar aplicar las regresiones y modelos lineales correspondientes
para predecir los valores faltantes de las columnas de humedad y periodo del día (como reemplazo y mejora de las técnicas de imputación de Missing Values realizada previamente en la asignatura de Minería Datos, que es la que se toma como referencia de los datos de esta actividad).

<h2> Visualizaciones</h2>
La primera pregunta que se pretende resolver es la siguiente: ¿en qué condados el tráfico se ve más tiempo obstaculizado a causa de los distintos accidentes?
Aunque solamente dispongamos de la información en 3 estados, en realidad los accidentes se distribuyen en 132 condados diferentes, por lo que, al tratarse de zonas geolocalizadas, podemos visualizar un mapa en los que se muestre, para cada uno de los condados, el tiempo medio de afectación en el tráfico de todos sus accidentes. 
<br>
<br>
<iframe title="Afectación de los accidentes en el tráfico" aria-label="Mapa" id="datawrapper-chart-2IVPB" src="https://datawrapper.dwcdn.net/2IVPB/1/" scrolling="no" frameborder="0" style="width:0; min-width: 80% !important; border: none;" height="450" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
</script>
Si accedemos desde la web, podemos interactuar con los diferentes condados del mapa para visualizar su nombre y el tiempo medio de afectación, el cual se selecciona automáticamente en la leyenda. De igual forma, si pulsamos sobre un rango de valores en la leyenda se muestran todos los condados al respecto. Fijémonos que también se ha ocultado el resto de estados en los que no disponemos de información, para facilitar la visualización.  
<br>
<br>
En el mapa se puede observar de forma clara que en los diferentes condados de Iowa el tiempo medio de afectación (tienen color con menos saturación) es en general mucho menor que el correspondiente a los distritos de Virginia Occidental (color más saturado). En referencia a Washington D. C., tenemos un único condado (District of Columbia) que se encuentra en la parte más al este, con un tiempo medio de alrededor de 2 horas y media. Por tanto, visualizamos claramente que, teniendo en cuenta los registros de 2020 y 2021, en Virginia Occidental se producen los accidentes que tienen mayor tiempo de afectación en el tráfico, por lo que es un factor clave a tener en cuenta por los responsables de la Administración y Dirección de Tráfico a la hora de actuar ante nuevos accidentes e informar a la ciudadanía de la previsión de afectación en el tránsito. 
<br>
<br>
Para resolver la segunda cuestión planteada, nos marcamos dos mensajes: 
  <li>Visualizar de forma clara la tendencia alrededor de 2021 del tiempo medio de afectación en el tráfico a causa de accidentes.</li>
  <li>Comparar y  determinar las diferencias del tiempo medio de afectación en el tráfico a lo largo de las estaciones del año</li>

  <iframe title="Afectación de los accidentes de tráfico" aria-label="Interactive line chart" id="datawrapper-chart-b4Ubi" src="https://datawrapper.dwcdn.net/b4Ubi/2/" scrolling="no" frameborder="0" style="width: 0; min-width: 60% !important; border: none;" height="450" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
  </script>
<br>
<br>
<iframe width="550" height="450" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQpw_gVijSKnbMUcS41MDsQ6WA-IaY47Hx3fAmsqxdio47MusYY090JkdCNhFesurR7kM5RiMR4Xalp/pubchart?oid=18865328&format=interactive"></iframe>

<h2>Influencia de la gravedad</h2>
<div id="viz1"></div>

<tr>
<td style="width: 550px; height: 450px;"><img src= https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos/blob/main/correlaciones.png?raw=true></td>
</tr>


  <br>

  <tr>
    <td style="width: 550px; height: 450px;"><img src= https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos/blob/main/TiempoDistancia.png?raw=true> </td>
  </tr>
<br>

<tr>
  <td style="width: 550px; height: 450px;"><img src= https://github.com/RamonRossello/08MBID---Visualizacion-de-Datos/blob/main/Weekend_Sunrise.png?raw=true> </td>
</tr>
<br>


</div>